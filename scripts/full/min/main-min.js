var startInViewportClassname="startInViewport",demClassname="dem",repClassname="rep",simpleHandsNumbClassname="numb",handsPercentageClassname="percentage",mobileGroupClassname="mobile-group",flagGroupClassname="flag-group",startInViewport={},chartBarsCollection={},simpleHandsCollection={},mobileHandsCollection={},flagHandsCollection={},primaryNavCollection={},chart1={},chart2={},allSections={},noStickySections={},postsNumber={},primaryNav={},originalNumber={},heroText={},controls={},scrolledRestoreTime=1050,isScrolled=!1,isScrollEnabled=!0,isMenuOpened=!1,menuButtonClicked=!1,scrolledTimeout=null,keys={37:1,38:1,39:1,40:1,32:1,34:1,35:1,36:1},scrollDownKeys={39:1,40:1,32:1,34:1,35:1};$(function(){controls=$(".controls"),controls.each(function(){if(this.charts=$(this).find(".chart-bars"),this.charts.currentStep=0,this.charts.stepsEnabled=!0,this.leftScroll=$(this).find(".left"),this.rightScroll=$(this).find(".right"),this.leftScroll.object=this.charts,this.rightScroll.object=this.charts,this.scrollEvent=marginAnimation,$(this).find(".table-moving").length){var e=this.charts.find("tfoot").find("td")[0].clientWidth*this.charts.find("tfoot").find("td").length;isMobile()?this.charts.steps=[{step:0},{step:-(e-$(window).width())/8},{step:-(e-$(window).width())/8*2},{step:-(e-$(window).width())/8*3},{step:-(e-$(window).width())/8*4},{step:-(e-$(window).width())/8*5},{step:-(e-$(window).width())/8*6},{step:-(e-$(window).width())/8*7},{step:1.02*-(e-$(window).width())}]:this.charts.steps=[{step:0},{step:-(e-$(window).width())/3},{step:-(e-$(window).width())/3*2},{step:.83*-(e-$(window).width())}]}else isMobile()?this.charts.steps=[{step:0},{step:-(this.charts[0].clientWidth-$(window).width())/3},{step:-(this.charts[0].clientWidth-$(window).width())/3*2},{step:1.05*-(this.charts[0].clientWidth-$(window).width())}]:this.charts.steps=[{step:0},{step:1.25*-(this.charts[0].clientWidth-$(window).width())}]}),chartBarsCollection=$(".chart-piece-wrapper"),chartBarsCollection.currentAnimationIndex=0,chartBarsCollection.transitToNext=.2,chartBarsCollection.isActive=!1,chartBarsCollection.each(function(){$(this).css({width:"6.67%"}),this.chartBar=$(this).find(".chart-bar"),this.chartImage=$(this).find("img"),this.chartName=$(this).find("h6"),this.chartPercentage=$(this).find("span"),this.chartText=$(this).find(".chart-text"),this.chartPiece=$(this).find(".chart-piece")}),simpleHandsCollection=$(".hand-bar"),simpleHandsCollection.each(function(e){this.chartBar=$(this),this.maxHeight=simpleHandsHeights[e].height}),shuffle(simpleHandsCollection),simpleHandsCollection.currentAnimationIndex=0,simpleHandsCollection.transitToNext=.3,simpleHandsCollection.doAtEnd={animation:fadeInAnimation,object:$(simpleHandsCollection[0].parentElement.parentElement.parentElement).find("."+simpleHandsNumbClassname)},simpleHandsCollection.doAtEnd.object.doAtEnd={animation:fadeInAnimation,object:$(simpleHandsCollection[0].parentElement.parentElement.parentElement).find("."+handsPercentageClassname)},mobileHandsCollection=$("."+mobileGroupClassname).find("img"),mobileHandsCollection.currentAnimationIndex=0,mobileHandsCollection.each(function(){this.maxHeight=0}),shuffle(mobileHandsCollection),mobileHandsCollection.doAtEnd={animation:fadeInAnimation,object:$(mobileHandsCollection[0].parentElement.parentElement.parentElement).find("."+simpleHandsNumbClassname)},mobileHandsCollection.doAtEnd.object.doAtEnd={animation:fadeInAnimation,object:$(mobileHandsCollection[0].parentElement.parentElement.parentElement).find("."+handsPercentageClassname)},flagHandsCollection=$("."+flagGroupClassname).find("img"),flagHandsCollection.currentAnimationIndex=0,flagHandsCollection.each(function(){this.maxHeight=0}),shuffle(flagHandsCollection),flagHandsCollection.doAtEnd={animation:fadeInAnimation,object:$(flagHandsCollection[0].parentElement.parentElement.parentElement).find("."+simpleHandsNumbClassname)},primaryNav=$(".cd-primary-nav"),primaryNavCollection=primaryNav.find("a"),primaryNavCollection.currentAnimationIndex=0,primaryNavCollection.isActive=!1,primaryNavCollection.isTurnedOn=!1,allSections=$(".sticky"),allSections.currentSection=0,noStickySections=$(".attr-no-sticky"),postsNumber=$(".postsNumber"),originalNumber=parseInt(postsNumber[0].textContent.replace(",","")),heroText=$(".hero-section").find("h1, h4"),updatePostsNumber(),isMobile()?$.getScript("https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js",function(e,t,n){console.log("loaded"),$(".chart-hidden-wrap").on("swipeleft",function(){scrollButtons(controls[0].rightScroll)}),$(".chart-hidden-wrap").on("swiperight",function(){scrollButtons(controls[0].leftScroll)})}):(startScrollEvent(),disableScroll()),startInViewport=$("."+startInViewportClassname),startInViewport.each(function(e){return this.isLaunched=!1,null==$(this).doAtEnd&&(this.doAtEnd={animation:function(){},object:null}),containClass($(this)[0],"notForMobile")&&isMobile()?void(this.animation=null):(containClass($(this)[0],"chart-bars")&&(isMobile()?startChartSlideshow(null,byMonthData):this.animation=startChartSlideshow),containClass($(this)[0],"hand-group")&&(isMobile()?simpleHandsAnimation():this.animation=simpleHandsAnimation),containClass($(this)[0],mobileGroupClassname)&&(isMobile()?mobileGroupAnimation():this.animation=mobileGroupAnimation),void(containClass($(this)[0],flagGroupClassname)&&(isMobile()?flagGroupAnimation():this.animation=flagGroupAnimation)))}),chart1=new Highcharts.Chart({chart:{type:"spline",renderTo:"chartContainer1"},tooltip:{enabled:!1},title:{text:""},subtitle:{text:"Sessions: 186",floating:!0,y:240},yAxis:{title:"",min:0,max:40,labels:{formatter:function(){return this.value+"%"}},gridLineWidth:0},xAxis:{type:"datetime",dateTimeLabelFormats:{minute:"%H:%M"},showFirstLabel:!1,gridLineWidth:.5},plotOptions:{spline:{lineWidth:2,states:{hover:{lineWidth:4}},marker:{enabled:!1},pointInterval:50400,pointStart:Date.UTC(2015,4,31,0,0,0)}},legend:{enabled:!1},series:[{data:[0,8,10,9,10,3,5,2,3,6,4,5,6,6,7,6,6,7,7,7,5,7,8,7,9,8,12,6,9,5,8,0]},{data:[0,30,25,27,20,22,23,20,24,20,24,17,14,13,20,20,25,18,15,23,19,21,20,21,19,25,29,29,25,26,24]}]}),chart2=new Highcharts.Chart({chart:{type:"spline",renderTo:"chartContainer2"},tooltip:{enabled:!1},title:{text:""},subtitle:{text:"Sessions: 186",floating:!0,y:240},yAxis:{title:"",min:0,max:40,labels:{formatter:function(){return this.value+"%"}},gridLineWidth:0},xAxis:{type:"datetime",dateTimeLabelFormats:{minute:"%H:%M"},showFirstLabel:!1,gridLineWidth:.5},plotOptions:{spline:{lineWidth:2,states:{hover:{lineWidth:4}},marker:{enabled:!1},pointInterval:50400,pointStart:Date.UTC(2015,4,31,0,0,0)}},legend:{enabled:!1},series:[{data:[0,4,5,7,4,3,5,6,7,7,8,8,7,8,9,6,7,8,7,8,3,4,3,5,3,6,7,9,6,4,6]},{data:[5,9,10,12,9,8,10,11,12,12,12,13,12,13,14,11,12,13,12,13,8,9,8,10,8,11,12,14,11,9,11]}]})}),$(window).load(function(){$(".se-pre-con").fadeOut("slow"),NProgress.done()}),$(function(){NProgress.start()}),$(window).scroll(function(){isScrollEnabled&&scrollEvent()}),$(".nav-links").click(function(){isScrollEnabled&&!isMobile()?disableScroll():{},allSections.currentSection=primaryNavCollection.index($(this)),smoothScrollTo($(allSections[allSections.currentSection]),null)}),$(".scroll-down-button").click(function(){isMobile?allSections.currentSection=$(".scroll-down-button").index($(this))+1:allSections.currentSection++,smoothScrollTo($(allSections[allSections.currentSection]),null)}),$(".lines-button").on("click",function(){toggleMenu()}),$(".scroll-button").on("click",function(){scrollButtons($(this))}),$(".graph-tabs .list-inline").on("click","li",function(){$(this).addClass("active").siblings().removeClass("active")}),$(".chartByMonth").click(function(){controls[0].rightScroll.object.stepsEnabled=!0,scrollButtons(controls[0].leftScroll),chartBarsCollection.isActive&&$(chartBarsCollection[chartBarsCollection.currentAnimationIndex].chartBar).stop(!0),startChartSlideshow(null,byMonthData)}),$(".chartByYear").click(function(){controls[0].rightScroll.object.stepsEnabled=!0,scrollButtons(controls[0].leftScroll),chartBarsCollection.isActive&&$(chartBarsCollection[chartBarsCollection.currentAnimationIndex].chartBar).stop(!0),startChartSlideshow(null,byYearData)}),$(".chartBy2012").click(function(){controls[0].rightScroll.object.stepsEnabled=!1,scrollButtons(controls[0].leftScroll),chartBarsCollection.isActive&&$(chartBarsCollection[chartBarsCollection.currentAnimationIndex].chartBar).stop(!0),startChartSlideshow(null,twentytwelveDAta)}),scrollButtons=function(e){controls.each(function(){var t=$(this)[0].leftScroll,n=$(this)[0].rightScroll;n[0]==e[0]?(n.object.currentStep<n.object.steps.length-1&&n.object.currentStep++,n.by=n.object.steps[n.object.currentStep].step,$(this)[0].scrollEvent(n)):t[0]==e[0]&&(n.object.currentStep=0,t.by=n.object.steps[n.object.currentStep].step,$(this)[0].scrollEvent($(this)[0].leftScroll)),n.object.stepsEnabled?n.object.currentStep==n.object.steps.length-1?(n.stop().animate({opacity:0},function(){n.css({display:"none"})}),t.css({display:"table"}),t.stop().animate({opacity:1})):0==n.object.currentStep?(t.stop().animate({opacity:0},function(){t.css({display:"none"})}),n.css({display:"table"}),n.stop().animate({opacity:1})):(t.css({display:"table"}),t.stop().animate({opacity:1}),n.css({display:"table"}),n.stop().animate({opacity:1})):(n.stop().animate({opacity:0},function(){n.css({display:"none"})}),t.stop().animate({opacity:0},function(){t.css({display:"none"})}))})},checkInViewport=function(){startInViewport.length&&startInViewport.each(function(e){elementInViewport(this)&&(this.isLaunched||(this.isLaunched=!0,null!=$(this)[0].animation&&$(this)[0].animation($(this))))})},toggleMenu=function(){isMenuOpened=!isMenuOpened,$(".lines-button").toggleClass("close"),toggleNavigation(primaryNavCollection)},scrolled=function(){checkInViewport(),isMobile()||noStickySections.length&&noStickySections.each(function(){this==allSections[allSections.currentSection]&&($(window).scrollTop()<$(this)[0].offsetTop-200?isScrollEnabled&&(disableScroll(),scrollToPrevSection()):$(window).scrollTop()>$(this)[0].offsetTop+$(this)[0].clientHeight-$(window).height()+200&&isScrollEnabled&&(disableScroll(),scrollToNextSection()))})},scrollEvent=function(){checkScrolled(),scrolled(),isMenuOpened&&toggleMenu()},startScrollEvent=function(){var e=!1;document.location.hash&&allSections.each(function(t,n){$(n).is(document.location.hash)&&!e&&(allSections.currentSection=t,smoothScrollTo($(allSections[allSections.currentSection]),null),e=!0)})},checkScrolled=function(){isScrolled=!0,null!=scrolledTimeout&&clearTimeout(scrolledTimeout),scrolledTimeout=setTimeout(function(){scrolledTimeout=null,isScrolled=!1},scrolledRestoreTime)},smoothScrollTo=function(e,t){var n={};n=t||e[0].offsetTop,$("html, body").stop().animate({scrollTop:n},{duration:600,progress:function(e,t,n){isMobile()||$("#blank").css("margin-top",$(document).scrollTop()/10*9)},complete:function(){checkInViewport(),isMobile()||($(allSections[allSections.currentSection]).is(".attr-no-sticky")?enableScroll():disableScroll(),document.location.hash=$(allSections[allSections.currentSection]).attr("id")),0!=allSections.currentSection||isMobile()||heroText.stop().fadeIn(400),isMenuOpened&&toggleMenu()}})},scrollToNextSection=function(){allSections.currentSection<allSections.length-1&&(allSections.currentSection++,smoothScrollTo($(allSections[allSections.currentSection]),null),isMobile()||heroText.stop().fadeOut())},updatePostsNumber=function(){setTimeout(updatePostsNumber,1e3),originalNumber+=Math.round(10*Math.random()),originalNumber>15e3&&(originalNumber=11232),postsNumber[0].textContent=[originalNumber.toString().slice(0,2),",",originalNumber.toString().slice(2,6)].join("")},scrollToPrevSection=function(){var e=!1;allSections.currentSection>0&&(allSections.currentSection--,noStickySections.each(function(){if(this==allSections[allSections.currentSection]){var t=$(allSections[allSections.currentSection])[0];smoothScrollTo(null,t.offsetTop+t.clientHeight-$(window).height()),e=!0}}),e||smoothScrollTo($(allSections[allSections.currentSection]),null))},marginAnimation=function(e){e.object.stop().animate({marginLeft:e.by})},fadeInAnimation=function(e){e.delay(isMobile()?100:2e3*Math.random()).animate({opacity:"1"},e[0].fadeInDelay?e[0].fadeInDelay:200,function(){e.doAtEnd?e.doAtEnd.animation(e.doAtEnd.object):null!=e[0].doAtEnd&&e[0].doAtEnd.animation(e[0].doAtEnd.object)})},startChartSlideshow=function(e,t){var n=null!=t?t:byMonthData;chartBarsCollection.isActive=!0,chartBarsCollection.currentAnimationIndex=0,setWidth(chartBarsCollection,n),increaseBar(chartBarsCollection,n[chartBarsCollection.currentAnimationIndex].height,n)},setWidth=function(e,t){e.each(function(e,n){$(this).css(null!=t[e]?null!=t[e].width?{width:t[e].width+"%"}:{width:"8.33%"}:{width:"8.33%"})})},simpleHandsAnimation=function(){increaseBar(simpleHandsCollection,simpleHandsCollection[simpleHandsCollection.currentAnimationIndex].maxHeight,null)},mobileGroupAnimation=function(){riseBar(mobileHandsCollection,mobileHandsCollection[0].maxHeight)},flagGroupAnimation=function(){riseBar(flagHandsCollection,flagHandsCollection[0].maxHeight)},riseBar=function(e,t){var n=$(e[e.currentAnimationIndex]);n.animate({bottom:t+"%"},200,"easeOutQuint",function(){e.currentAnimationIndex++,e.currentAnimationIndex<e.length?riseBar(e,e[e.currentAnimationIndex].maxHeight):null!=e.doAtEnd&&e.doAtEnd.animation(e.doAtEnd.object)})},increaseBar=function(e,t,n){var i=!1,a=$(e[e.currentAnimationIndex]);null!=a[0].chartImage&&(n[e.currentAnimationIndex]?($(a[0].chartImage).css({opacity:"1"}),$(a[0].chartImage).attr("src",n[e.currentAnimationIndex].imgName),n[e.currentAnimationIndex].party==repClassname?containClass(a[0].chartPiece[0],demClassname)&&$(a[0].chartPiece).switchClass(demClassname,repClassname):n[chartBarsCollection.currentAnimationIndex].party==demClassname&&containClass(a[0].chartPiece[0],repClassname)&&$(a[0].chartPiece).switchClass(repClassname,demClassname),$(a[0].chartPercentage)[0].textContent=n[e.currentAnimationIndex].percentage,$(a[0].chartName)[0].textContent=n[e.currentAnimationIndex].name):($(a[0].chartImage).css({opacity:"0"}),$(a[0].chartName)[0].textContent="")),$(a[0].chartBar).animate({height:t+"%"},{duration:isMobile()?200:400,easing:"easeOutQuint",progress:function(t,o,s){o>e.transitToNext&&!i&&(i=!0,e.currentAnimationIndex++,null!=a[0].chartText&&$(a[0].chartText).animate({opacity:1},300,function(){$(a[0].chartPercentage).animate({opacity:1},300)}),e.currentAnimationIndex<e.length?null!=n?n[e.currentAnimationIndex]?increaseBar(e,n[e.currentAnimationIndex].height,n):increaseBar(e,0,n):null!=e[e.currentAnimationIndex].maxHeight&&increaseBar(e,e[e.currentAnimationIndex].maxHeight,n):(e.isActive=!1,null!=e.doAtEnd&&e.doAtEnd.animation(e.doAtEnd.object)))}})},toggleNavigation=function(e){e.isTurnedOn=!e.isTurnedOn,e.isTurnedOn?(e.isActive=!0,e.currentAnimationIndex=0,primaryNav.addClass("is-visible"),primaryNav.stop().animate({opacity:1}),showNavigation(e)):(primaryNav.stop().animate({opacity:0},function(){primaryNav.removeClass("is-visible")}),setOpacity(e,0))},showNavigation=function(e){var t=$(e[e.currentAnimationIndex]),n=!1;t.stop().animate({opacity:1},{duration:100,easing:"swing",progress:function(t,i,a){i>.5&&!n&&(n=!0,e.currentAnimationIndex++,e.currentAnimationIndex<e.length?e.isTurnedOn&&showNavigation(e):e.isActive=!1)},complete:function(){e.isTurnedOn||(setOpacity(e,0),e.isActive=!1)}})},setOpacity=function(e,t){e.each(function(){0==t&&$(this).stop().animate({opacity:t},400)})},elementInViewport=function(e){var t=$(e),n=$(window);return t.offset().top+t.height()<=n.scrollTop()+n.height()},containClass=function(e,t){return e.className.indexOf(t)>=0},elementSize=function(e){var t={};return t=null!=e[0]?{height:e[0].clientHeight,width:e[0].clientWidth}:{height:0,width:0}},shuffle=function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);return e},preventDefault=function(e){e=e||window.event,e.preventDefault&&(isScrolled||isScrollEnabled||(checkScrolled(),isMenuOpened&&toggleMenu(),"keydown"==e.type?scrollDownKeys[e.keyCode]?scrollToNextSection():scrollToPrevSection():e.deltaY>0?scrollToNextSection():scrollToPrevSection()),e.preventDefault()),e.returnValue=!1},preventDefaultForScrollKeys=function(e){return keys[e.keyCode]?(preventDefault(e),!1):void 0},disableScroll=function(){isScrollEnabled&&(isMobile()||(window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys),isScrollEnabled=!1,console.log("turned off "+isScrollEnabled))},enableScroll=function(){isScrollEnabled||(isMobile()||(window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null),isScrollEnabled=!0,console.log("turned on "+isScrollEnabled))},isMobile=function(){return $(window).width()<=768};var _width=isMobile()?15.5:34.5,_height=isMobile()?.85:1,byYearData=[{party:"dem",name:"Hillary Clinton",percentage:"$1.67MM",height:80*_height,imgName:"assets/img/faces/Hillary_Clinton_dem.png"},{party:"dem",name:"Bernie Sanders",percentage:"$1.26MM",height:70*_height,imgName:"assets/img/faces/Bernie_Sanders_dem.png"},{party:"rep",name:"Paul Rand",percentage:"$250K",height:23*_height,imgName:"assets/img/faces/Paul_Rand_rep.png"},{party:"rep",name:"Carly Fiorina",percentage:"$115K",height:14*_height,imgName:"assets/img/faces/Carly_Fiorina_rep.png"},{party:"rep",name:"Mike Huckabee",percentage:"$80K",height:13*_height,imgName:"assets/img/faces/Mike_Huckabee_rep.png"},{party:"dem",name:"Martin Omalley",percentage:"$65K",height:12,imgName:"assets/img/faces/Martin_OMalley_dem.png"},{party:"rep",name:"Richard Santorum",percentage:"$8K",height:10,imgName:"assets/img/faces/Richard_Santorum_rep.png"},{party:"rep",name:"Jeb Bush",percentage:"",height:3,imgName:"assets/img/faces/Jeb_Bush_rep.png"},{party:"rep",name:"Marco Rubio",percentage:"",height:3,imgName:"assets/img/faces/Marco_Rubio_rep.png"},{party:"rep",name:"Donald Trump",percentage:"",height:3,imgName:"assets/img/faces/Donald_Trump_rep.png"},{party:"rep",name:"Ben Carson",percentage:"",height:3,imgName:"assets/img/faces/Ben_Carson_rep.png"},{party:"rep",name:"Ted Cruz",percentage:"",height:3,imgName:"assets/img/faces/Ted_Cruz_rep.png"}],byMonthData=[{party:"dem",name:"Hillary Clinton",percentage:"$690.4K",height:80*_height,imgName:"assets/img/faces/Hillary_Clinton_dem.png"},{party:"dem",name:"Bernie Sanders",percentage:"$515K",height:69*_height,imgName:"assets/img/faces/Bernie_Sanders_dem.png"},{party:"rep",name:"Carly Fiorina",percentage:"$95.3K",height:25*_height,imgName:"assets/img/faces/Carly_Fiorina_rep.png"},{party:"dem",name:"Martin O`malley",percentage:"$50K",height:17*_height,imgName:"assets/img/faces/Martin_OMalley_dem.png"},{party:"rep",name:"Mike Huckabee",percentage:"$48K",height:16*_height,imgName:"assets/img/faces/Mike_Huckabee_rep.png"},{party:"rep",name:"Paul Rand",percentage:"$5.6K",height:10,imgName:"assets/img/faces/Paul_Rand_rep.png"},{party:"rep",name:"Richard Santorum",percentage:"$4K",height:9,imgName:"assets/img/faces/Richard_Santorum_rep.png"},{party:"rep",name:"Donald Trump",percentage:"",height:3,imgName:"assets/img/faces/Donald_Trump_rep.png"},{party:"rep",name:"Jeb Bush",percentage:"",height:3,imgName:"assets/img/faces/Jeb_Bush_rep.png"},{party:"rep",name:"Marco Rubio",percentage:"",height:3,imgName:"assets/img/faces/Marco_Rubio_rep.png"},{party:"rep",name:"Ben Carson",percentage:"",height:3,imgName:"assets/img/faces/Ben_Carson_rep.png"},{party:"rep",name:"Ted Cruz",percentage:"",height:3,imgName:"assets/img/faces/Ted_Cruz_rep.png"}],twentytwelveDAta=[{party:"dem",name:"Obama",percentage:"$74.43MM",height:77,width:_width,imgName:"assets/img/faces/Obama_dem.png"},{party:"rep",name:"Mitt Romney",percentage:"$16.08MM",height:23,width:_width,imgName:"assets/img/faces/Mitt_Romney_rep.png"}],simpleHandsHeights=[{height:95},{height:85},{height:65},{height:70},{height:75},{height:65},{height:78},{height:80},{height:67.5},{height:102.5}];